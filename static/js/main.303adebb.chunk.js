(this.webpackJsonpnctstats=this.webpackJsonpnctstats||[]).push([[0],{190:function(e,t,n){e.exports=n(379)},195:function(e,t,n){},379:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"BLOCK",(function(){return w})),n.d(a,"BOUNTY",(function(){return C})),n.d(a,"ASSERTION",(function(){return g})),n.d(a,"REVEAL",(function(){return p})),n.d(a,"VOTE",(function(){return M})),n.d(a,"QUORUM",(function(){return j})),n.d(a,"SETTLED",(function(){return T})),n.d(a,"INITIALIZED_CHANNEL",(function(){return k}));var r=n(1),c=n.n(r),u=n(36),l=n.n(u),o=(n(195),n(8)),i=n(47),m=n(21),s=n(150),d=n(65),E=n(22),_=n(30),b=n(29),v=n(18),O=function e(t){Object(v.a)(this,e),this.timestamp=Date.now(),this.message=t,this.block_number=t.data.number},h=function e(t){Object(v.a)(this,e),this.timestamp=Date.now(),this.message=t,this.block_number=t.block_number,this.txhash=t.txhash},f=function(e){Object(_.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).guid=e.data.guid,a.author=e.data.author,a.amount=e.data.amount/Math.pow(10,18),a}return n}(h),y=function(e){Object(_.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).bounty_guid=e.data.bounty_guid,a.author=e.data.author,a.bid=e.data.bid/Math.pow(10,18),a}return n}(h),N=function(e){Object(_.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).bounty_guid=e.data.bounty_guid,a.author=e.data.author,a.verdict=e.data.verdicts[0],a}return n}(h),w="block",C="bounty",g="assertion",p="Reveal",M="Vote",j="Quorum",T="settled_bounty",k="Initialized Channel",I=function(e,t){t.count+=1,t.last=e,t.messages=[e].concat(Object(E.a)(t.messages.slice(0,20)))},S=Object(m.c)({community:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(d.a)(e,(function(e){switch(t.type){case"COMMUNITY_CONNECT":return void(e[t.community_url]={community_name:t.community_name,community_url:t.community_url,connection:{initiated:Date.now(),succeded:null,closed:null,errors:[]},messages:{last:null,last_error:null}});case"COMMUNITY_CONNECT__SUCCEEDED":return void(e[t.community_url].connection.succeded=Date.now());case"COMMUNITY_CONNECTION__CLOSED":return void(e[t.community_url].connection.closed=Date.now());case"COMMUNITY_CONNECTION__ERROR":return void e[t.community_url].connection.errors.push({timestamp:Date.now(),event:t.event});case"COMMUNITY_CONNECTION_MESSAGE":return void(e[t.community_url].messages.last={timestamp:Date.now(),event:t.event});case"COMMUNITY_CONNECTION_MESSAGE__SUCCEEDED":return;case"COMMUNITY_CONNECTION_MESSAGE__FAILED":return void(e[t.community_url].messages.last_error={timestamp:Date.now(),err:t.err});default:return}}))},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(d.a)(e,(function(e){switch(t.type){case"COMMUNITY_CONNECT":return void(e[t.community_url]=Object.keys(a).reduce((function(e,t){return e[a[t]]={count:0,last:null,messages:[]},e}),{}));case"COMMUNITY_CONNECTION_MESSAGE__SUCCEEDED":var n,r;switch(t.data.event){case w:return n=new O(t.data),r=e[t.community_url][w],void I(n,r);case C:return n=new f(t.data),r=e[t.community_url][C],I(n,r),void(r.total_amount=(r.total_amount||0)+n.amount);case g:return n=new y(t.data),r=e[t.community_url][g],I(n,r),void(r.total_bid=(r.total_bid||0)+n.bid);case p:return n=new N(t.data),r=e[t.community_url][p],void I(n,r);case T:return n=new n.MessageSettled(t.data),r=e[t.community_url][T],I(n,r),void(r.total_payout=(r.total_payout||0)+n.payout);default:return}default:return}}))}}),D=function(e,t){return S(e,t)},U=function(){var e=Object(m.a)(s.a),t=Object(m.d)(e,window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e});return Object(m.e)(D,void 0,t)}(),x=n(151),A=function(e){Object(_.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(v.a)(this,n),(a=t.call(this,e)).state={hasError:!1,error:null},a}return Object(x.a)(n,[{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"Something went wrong. Please reload the page"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),n}(c.a.Component),Y=n(23),R=n(41),L=n(25),G=function(e){var t=Object(o.c)((function(e){return e.messages["wss://nu.k.polyswarm.network/v1/events/?chain=side"][g].last})),n=Object(r.useState)([]),a=Object(R.a)(n,2),u=a[0],l=a[1];return Object(r.useEffect)((function(){t&&l((function(e){var n=e.findIndex((function(e){return e.name===t.block_number}));return-1===n?(20===e.length&&e.shift(),[].concat(Object(E.a)(e),[{name:t.block_number,bid:t.bid}])):(e[n].bid+=t.bid,Object(E.a)(e))}))}),[t]),c.a.createElement("div",{style:{marginBottom:"1.618em"}},c.a.createElement(L.c,{width:"100%",height:100},c.a.createElement(L.b,{data:u},c.a.createElement(L.a,{dataKey:"bid",fill:"#6d3aec"}))),c.a.createElement("div",null,"assertion bid total by block"))},B=function(e){var t=e.amount.toFixed(8).split("."),n=Object(R.a)(t,2),a=n[0],r=n[1];return c.a.createElement("span",null,c.a.createElement("span",null,a),c.a.createElement("span",{style:{opacity:.64}},c.a.createElement("span",null,"."),c.a.createElement("span",null,r)),c.a.createElement("span",null,"NCT"))},F=function(e){var t=Object(o.c)((function(e){return e.messages["wss://nu.k.polyswarm.network/v1/events/?chain=side"][g].total_bid}));return c.a.createElement("div",null,c.a.createElement("div",null,"total bid"),c.a.createElement("div",null,c.a.createElement(B,{amount:t||0})))},V=function(e){var t=Object(o.c)((function(e){return e.messages["wss://nu.k.polyswarm.network/v1/events/?chain=side"][g].count}));return c.a.createElement("div",null,c.a.createElement("div",null,"count"),c.a.createElement("div",null,t))},X=function(e){var t=Object(o.c)((function(e){return e.messages["wss://nu.k.polyswarm.network/v1/events/?chain=side"][g].messages}));return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{style:{textAlign:"left"}},"block"),c.a.createElement("th",{style:{textAlign:"left"}},"bounty guid"),c.a.createElement("th",{style:{textAlign:"right"}},"bid"))),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",{key:"".concat(Date.now(),"-").concat(e.author,"-").concat(e.bounty_guid)},c.a.createElement("td",null,e.block_number),c.a.createElement("td",null,e.bounty_guid),c.a.createElement("td",null,c.a.createElement(B,{amount:e.bid})))}))))},J=function(e){var t=Object(o.c)((function(e){return e.messages["wss://nu.k.polyswarm.network/v1/events/?chain=side"][C].last})),n=Object(r.useState)([]),a=Object(R.a)(n,2),u=a[0],l=a[1];return Object(r.useEffect)((function(){t&&l((function(e){var n=e.findIndex((function(e){return e.name===t.block_number}));return-1===n?(20===e.length&&e.shift(),[].concat(Object(E.a)(e),[{name:t.block_number,amount:t.amount}])):(e[n].amount+=t.amount,Object(E.a)(e))}))}),[t]),c.a.createElement("div",{style:{marginBottom:"1.618em"}},c.a.createElement(L.c,{width:"100%",height:100},c.a.createElement(L.b,{data:u},c.a.createElement(L.a,{dataKey:"amount",fill:"#6d3aec"}))),c.a.createElement("div",null,"bounty amount total by block"))},K=function(e){var t=Object(o.c)((function(e){return e.messages["wss://nu.k.polyswarm.network/v1/events/?chain=side"][C].total_amount}));return c.a.createElement("div",null,c.a.createElement("div",null,"total amount"),c.a.createElement("div",null,c.a.createElement(B,{amount:t||0})))},W=function(e){var t=Object(o.c)((function(e){return e.messages["wss://nu.k.polyswarm.network/v1/events/?chain=side"][C].count}));return c.a.createElement("div",null,c.a.createElement("div",null,"count"),c.a.createElement("div",null,t))},P=function(e){var t=Object(o.c)((function(e){return e.messages["wss://nu.k.polyswarm.network/v1/events/?chain=side"][C].messages}));return c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{style:{textAlign:"left"}},"block"),c.a.createElement("th",{style:{textAlign:"left"}},"guid"),c.a.createElement("th",{style:{textAlign:"right"}},"bid"))),c.a.createElement("tbody",null,t.map((function(e){return c.a.createElement("tr",{key:"".concat(Date.now(),"-").concat(e.guid)},c.a.createElement("td",null,e.block_number),c.a.createElement("td",null,e.guid),c.a.createElement("td",null,c.a.createElement(B,{amount:e.amount})))}))))},Q=function(e){return c.a.createElement("section",null,c.a.createElement("h2",null,"nctstats"),c.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},c.a.createElement("div",null,c.a.createElement("h3",null,"bounties"),c.a.createElement(J,null),c.a.createElement(W,null),c.a.createElement(K,null),c.a.createElement(P,null)),c.a.createElement("div",null,c.a.createElement("h3",null,"assertions"),c.a.createElement(G,null),c.a.createElement(V,null),c.a.createElement(F,null),c.a.createElement(X,null))))},z=function(e,t){return function(n){!function(e,t){return function(n){n({type:"COMMUNITY_CONNECT",community_name:e,community_url:t});var a=new WebSocket(t);a.onopen=function(a){n({type:"COMMUNITY_CONNECT__SUCCEEDED",community_name:e,community_url:t,event:a})},a.onclose=function(a){n({type:"COMMUNITY_CONNECTION__CLOSED",community_name:e,community_url:t,event:a})},a.onerror=function(a){n({type:"COMMUNITY_CONNECTION__ERROR",community_name:e,community_url:t,event:a})},a.onmessage=function(a){n({type:"COMMUNITY_CONNECTION_MESSAGE",community_name:e,community_url:t,event:a}),new Promise((function(e,t){try{var n;"function"===typeof(null===(n=a.data)||void 0===n?void 0:n.text)?a.data.text().then((function(t){return e(t)})).catch((function(e){return t(e)})):e(JSON.parse(a.data))}catch(r){t(r)}})).then((function(a){n({type:"COMMUNITY_CONNECTION_MESSAGE__SUCCEEDED",community_name:e,community_url:t,data:a})})).catch((function(a){n({type:"COMMUNITY_CONNECTION_MESSAGE__FAILED",community_name:e,community_url:t,err:a})}))}}}(e,t)(n)}},H=function(e){return Object(o.b)()(z("","wss://nu.k.polyswarm.network/v1/events/?chain=side")),c.a.createElement(Q,null)},Z=function(e){return c.a.createElement("section",null,c.a.createElement("h2",null,"404 Not Found"),c.a.createElement("div",null,c.a.createElement(i.b,{to:"/",tabIndex:"-1"},c.a.createElement("span",null,"/"))))},$=function(e){return c.a.createElement("main",null,c.a.createElement(Y.d,null,c.a.createElement(Y.b,{exact:!0,path:"/404",component:Z}),c.a.createElement(Y.b,{exact:!0,path:"/",component:H}),c.a.createElement(Y.b,{path:"/dashboard",component:Q}),c.a.createElement(Y.a,{to:"/404"})))},q=function(e){return c.a.createElement(o.a,{store:U},c.a.createElement(i.a,{basename:"/nctstats"},c.a.createElement(A,null,c.a.createElement($,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[190,1,2]]]);
//# sourceMappingURL=main.303adebb.chunk.js.map